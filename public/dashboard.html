<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OnTrack | Dashboard</title>
  <link rel="stylesheet" href="./css/dash.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
  <link rel="stylesheet" href="./css/navbar.css">
    <link href="https://cdn.jsdelivr.net/npm/fastbootstrap@2.2.0/dist/css/fastbootstrap.min.css" rel="stylesheet"
        integrity="sha256-V6lu+OdYNKTKTsVFBuQsyIlDiRWiOmtC8VQ8Lzdm2i4=" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <lin k rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=edit"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
  <div id="sidebar-container"></div>
  <div id="navbar-container"></div>
  <div class="dashboard">
    <div class="kpi-row">
        <div class="kpi-box dark-red">
          <p>Quantidade de servidores em alerta</p>
          <h2>13</h2>
        </div>
      <div class="kpi-box amber-tone">
        <p>Data coleta hoje (GB)</p>
        <h2>135.8</h2>
      </div>
      <div class="kpi-box green-tone">
        <p>Último Backup</p>
        <h2>13h atrás</h2>
      </div>
    </div>

        <div class="charts-grid">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>Uso da CPU (%)</h3>
                    <span class="change">↑ +5%</span>
                </div>
                <canvas id="cpuChart"></canvas>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3>Uso da RAM (%) </h3>
                    <span class="change">↑ +3%</span>
                </div>
                <canvas id="ramChart"></canvas>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3>Espaço em disco usado (%)</h3>
                    <span class="change">↑ +1%</span>
                </div>
                <canvas id="diskChart"></canvas>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3>Rede (%) </h3>
                    <span class="change">↑ +8%</span>
                </div>
                <canvas id="networkChart"></canvas>
            </div>
        </div>
    </div>

  <script src="./js/navbar.js"></script>
  <script>
    const createLineChart = (ctx, data1, data2, recommendedValue) =>
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sab', 'Dom'],
          datasets: [
            {
              label: 'Hoje',
              data: data1,
              borderColor: '#4285F4', 
              backgroundColor: 'transparent',
              fill: false,
              borderWidth: 2,
              tension: 0,
              pointRadius: 3,
              pointBackgroundColor: '#4285F4',
            },
            {
              label: 'Semana Passada',
              data: data2,
              borderColor: '#EA4335',
              backgroundColor: 'transparent',
              fill: false,
              borderWidth: 2,
              tension: 0,
              pointRadius: 3,
              pointBackgroundColor: '#EA4335',
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { 
            legend: { 
              display: true,
              position: 'top',
              labels: {
                boxWidth: 10,
                padding: 10,
              }
            },
            annotation: {
                annotations: {
                    recommendationLine: {
                        type: 'line',
                        mode: 'horizontal',
                        scaleID: 'y',
                        value: recommendedValue,
                        borderColor: 'rgba(50, 50, 50, 0.5)',
                        borderWidth: 1,
                        borderDash: [6, 6],
                        label: {
                            content: 'Recomendado',
                            enabled: true,
                            position: 'end',
                            backgroundColor: 'rgba(50, 50, 50, 0.9)',
                            font: {
                                size: 10,
                            }
                        }
                    }
                }
            }
          },
          scales: {
            x: {
              grid: { display: true },
              ticks: { display: true },
              border: { display: true },
            },
            y: {
              grid: { display: true },
              ticks: { display: true },
              border: { display: true },
              beginAtZero: true,
              max: 90,
            },
          },
        },
      });

        createLineChart(document.getElementById('cpuChart'), [24, 26, 38, 48, 62, 60, 62], [15, 20, 25, 40, 50, 65, 55], 80);
        createLineChart(document.getElementById('ramChart'), [55, 60, 58, 65, 59, 57, 61], [60, 55, 62, 60, 50, 55, 70], 70);
        createLineChart(document.getElementById('diskChart'), [10, 15, 20, 30, 45, 60, 75], [25, 18, 35, 25, 40, 50, 65], 75);
        createLineChart(document.getElementById('networkChart'), [40, 45, 55, 50, 70, 85, 90], [35, 50, 40, 60, 65, 75, 80], 80);
    </script>
</body>
</html>
