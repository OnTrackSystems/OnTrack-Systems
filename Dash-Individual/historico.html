<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Hist칩rico de Dados dos Servidores</title>

<!-- Fontes e Tailwind -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
<script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        danger: "#DC2626",
        textPrimary: "#111827",
        textSecondary: "#6B7280",
        border: "#E5E7EB",
        panelBg: "#F9FAFB"
      },
      fontFamily: { display: ["Inter", "sans-serif"] },
    },
  },
};
</script>

<style>
  .transition-height {
    transition: max-height 0.3s ease;
  }
</style>
</head>

<body class="font-display bg-gray-100">
<div class="flex h-screen">

  <!-- Sidebar -->
  <aside class="w-64 flex-shrink-0 bg-white flex flex-col shadow-lg">
    <div class="p-6 text-2xl font-bold text-textPrimary border-b border-border">
      Painel<span class="text-danger">.</span>
    </div>

    <nav class="flex-grow p-4 space-y-2">

      <!-- Dashboard com submenu interno -->
      <div>
        <button id="dashboardBtn" class="w-full flex items-center justify-between gap-3 px-4 py-2 rounded-lg bg-danger/10 text-danger font-semibold hover:bg-danger/20 transition-colors">
          <div class="flex items-center gap-3">
            <span class="material-symbols-outlined">apps</span>
            Dashboard
          </div>
          <span id="dashboardArrow" class="material-symbols-outlined text-sm transition-transform duration-200">expand_more</span>
        </button>

        <!-- Submenu -->
        <div id="dashboardMenu" class="overflow-hidden max-h-0 transition-height">
          <a href="code.html" class="block px-8 py-2 text-sm text-textSecondary hover:text-danger transition-colors">Infra</a>
          <a href="dashboard-sales.html" class="block px-8 py-2 text-sm text-textSecondary hover:text-danger transition-colors">Sales</a>
          <a href="dashboard-reports.html" class="block px-8 py-2 text-sm text-textSecondary hover:text-danger transition-colors">Reports</a>
        </div>
      </div>

      <!-- Outros links -->
      <a class="flex items-center gap-3 px-4 py-2 rounded-lg text-textSecondary hover:bg-gray-100 transition-colors" href="servidores.html">
        <span class="material-symbols-outlined">dvr</span> Servidores
      </a>
      <a class="flex items-center gap-3 px-4 py-2 rounded-lg text-textSecondary hover:bg-gray-100 transition-colors" href="#">
        <span class="material-symbols-outlined">warning</span> Alertas
      </a>
      <a class="flex items-center gap-3 px-4 py-2 rounded-lg bg-danger/10 text-danger font-semibold transition-colors" href="historico.html">
        <span class="material-symbols-outlined">history</span> Hist칩rico
      </a>
    </nav>

    <div class="p-4 border-t border-border">
      <a class="flex items-center gap-3 px-4 py-2 rounded-lg text-textSecondary hover:bg-gray-100 transition-colors" href="#">
        <span class="material-symbols-outlined">logout</span> Sair
      </a>
    </div>
  </aside>

  <!-- Conte칰do principal -->
  <main class="flex-1 bg-panelBg overflow-y-auto p-10">
    <div class="max-w-6xl mx-auto">
      <h1 class="text-2xl font-bold text-textPrimary mb-6">Hist칩rico de Dados dos Servidores</h1>

      <!-- Filtros -->
      <div class="flex flex-wrap gap-4 mb-6">
        <select id="filterStatus" class="rounded-md border border-border bg-white px-3 py-2 text-sm">
          <option value="all">Todos os Status</option>
          <option value="Normal">游릭 Normal</option>
          <option value="Alerta">游리 Alerta</option>
          <option value="Cr칤tico">游댮 Cr칤tico</option>
        </select>

        <input type="date" class="rounded-md border border-border bg-white px-3 py-2 text-sm" />
        <input type="text" id="filterServer" placeholder="Buscar por nome do servidor" class="rounded-md border border-border bg-white px-3 py-2 text-sm flex-1 min-w-[200px]" />

        <button class="ml-auto flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
          <span class="material-symbols-outlined text-base">download</span> Exportar CSV
        </button>
      </div>

      <!-- Tabela -->
      <div class="bg-white rounded-lg shadow border border-border overflow-hidden">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-50 text-gray-600 text-left uppercase text-xs">
            <tr>
              <th class="px-6 py-3">Data/Hora</th>
              <th class="px-6 py-3">Nome do Servidor</th>
              <th class="px-6 py-3">M칠trica</th>
              <th class="px-6 py-3">Valor (%)</th>
              <th class="px-6 py-3">Status</th>
            </tr>
          </thead>
          <tbody id="tableBody" class="divide-y divide-border text-gray-800">
            <!-- Linhas adicionadas via JS -->
          </tbody>
        </table>

        <!-- Pagina칞칚o -->
        <div class="flex justify-between items-center p-4 text-sm text-textSecondary bg-gray-50">
          <p>Mostrando 1 a 8 de 1.258 resultados</p>
          <div class="space-x-2">
            <button class="px-3 py-1 border rounded-md hover:bg-gray-100">Anterior</button>
            <button class="px-3 py-1 border rounded-md hover:bg-gray-100">Pr칩ximo</button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Script submenu -->
<script>
  const dashboardBtn = document.getElementById('dashboardBtn');
  const dashboardMenu = document.getElementById('dashboardMenu');
  const dashboardArrow = document.getElementById('dashboardArrow');

  let menuOpen = false;
  dashboardBtn.addEventListener('click', () => {
    menuOpen = !menuOpen;
    dashboardMenu.style.maxHeight = menuOpen ? dashboardMenu.scrollHeight + 'px' : '0px';
    dashboardArrow.classList.toggle('rotate-180', menuOpen);
  });
</script>

<!-- Script da tabela -->
<script>
  const dados = [
    { data:'2025-11-12 14:30:15', servidor:'PROD-WEB-01', metrica:'CPU', valor:15.5, status:'Normal' },
    { data:'2025-11-12 14:28:45', servidor:'PROD-DB-01', metrica:'RAM', valor:85.2, status:'Alerta' },
    { data:'2025-11-12 14:25:10', servidor:'PROD-API-02', metrica:'Disco', valor:95.0, status:'Cr칤tico' },
    { data:'2025-11-12 14:22:05', servidor:'STAGING-WEB-01', metrica:'Rede', valor:5.8, status:'Normal' },
    { data:'2025-11-12 14:20:00', servidor:'PROD-WEB-01', metrica:'RAM', valor:70.1, status:'Normal' },
    { data:'2025-11-12 14:18:33', servidor:'PROD-DB-01', metrica:'CPU', valor:89.9, status:'Alerta' },
    { data:'2025-11-12 14:15:12', servidor:'PROD-API-01', metrica:'CPU', valor:25.0, status:'Normal' },
    { data:'2025-11-12 14:14:59', servidor:'PROD-API-02', metrica:'Disco', valor:94.8, status:'Cr칤tico' }
  ];

  const tableBody = document.getElementById("tableBody");
  const filterStatus = document.getElementById("filterStatus");
  const filterServer = document.getElementById("filterServer");

  function corStatus(status){
    switch(status){
      case 'Normal': return 'bg-green-100 text-green-700';
      case 'Alerta': return 'bg-yellow-100 text-yellow-700';
      case 'Cr칤tico': return 'bg-red-100 text-red-700';
      default: return '';
    }
  }

  function renderTabela(){
    const filtro = filterStatus.value;
    const busca = filterServer.value.toLowerCase();
    tableBody.innerHTML = '';

    dados
      .filter(d => (filtro === 'all' || d.status === filtro))
      .filter(d => d.servidor.toLowerCase().includes(busca))
      .forEach(d => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="px-6 py-3 whitespace-nowrap">${d.data}</td>
          <td class="px-6 py-3 font-medium">${d.servidor}</td>
          <td class="px-6 py-3">${d.metrica}</td>
          <td class="px-6 py-3">${d.valor.toFixed(1)}%</td>
          <td class="px-6 py-3">
            <span class="px-2 py-1 rounded-full text-xs font-semibold ${corStatus(d.status)}">${d.status}</span>
          </td>
        `;
        tableBody.appendChild(tr);
      });
  }

  filterStatus.addEventListener('change', renderTabela);
  filterServer.addEventListener('input', renderTabela);

  renderTabela();
</script>

</body>
</html>
